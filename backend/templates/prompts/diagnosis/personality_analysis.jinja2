{# Personality Analysis Prompt Template #}
{# Variables: user_responses, scene_context #}

あなたは心理診断の専門家です。以下のユーザーの回答に基づいて、性格分析を行ってください。

## ユーザーの回答
{% for response in user_responses %}
- シーン{{ loop.index }}: {{ response.scene_description }}
  選択: {{ response.choice }}
  理由: {{ response.reason if response.reason else "なし" }}
{% endfor %}

## 分析観点
以下の軸で分析してください：
- 冒険性 (Adventure): 新しい体験への開放性
- 集中性 (Focus): 目標達成への集中力  
- 穏やか性 (Serene): 心の平静さと調和

## 出力形式
以下のJSON構造に厳密に従って出力してください（Structured Outputsによる検証が適用されます）：

```json
{
  "personality_type": "タイプ名",
  "scores": {
    "adventure": 85,
    "focus": 72,
    "serene": 91
  },
  "analysis": "詳細な分析結果を200-300文字で記述してください。ユーザーの選択パターンと各軸のスコアを総合的に分析し、具体的で建設的な洞察を提供してください。"
}
```

【重要事項】
- JSON以外の出力は一切含めないでください
- 上記の構造を1文字たりとも違えることなく厳守してください
- scoresの各値は0-100の整数で記述してください
- analysisフィールドは必ず200-300文字の範囲で具体的な分析内容を記述してください
- personality_typeは選択パターンを反映した具体的なタイプ名を記述してください
