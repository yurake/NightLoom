# 初期キーワード API 実装計画

## 目的
初期アクセス時に提示する候補語と選択結果を管理する `GET /session/bootstrap` および `POST /session/{id}/keyword` の実装タスクを整理する。

## 成果物
- API エンドポイント 2 本と関連するドメインサービスの実装
- seed word を評価軸スコアへ反映する計算ロジック
- LLM フォールバック時の固定候補レスポンス

## 実装タスク
1. `bootstrap` ハンドラー
   - 50 音ランダム抽出 + 評価軸生成サービス呼び出し
   - 候補語生成 (LLM or テンプレ) と `allowFreeInput` 判定
   - レスポンス DTO の整形とログ記録
2. `keyword` ハンドラー
   - リクエストバリデーション（文字数・禁止語・source）
   - seed word を `seedScores` に変換するロジック呼び出し
   - シーン1生成 + テーマ ID 付与
3. 共通コンポーネント
   - Seed word → 軸タグマッピングの設定ファイル
   - エラーハンドラ（503 / 422）
   - トレーシング用イベント発火

## テスト
- 正常系: 候補提示→単語確定→シーン1生成
- 異常系: LLM タイムアウト→固定候補返却, 禁止語入力→422

## スケジュールメモ
- API 実装: 2 日
- Seed スコア調整ロジック: 1 日
- 結合テスト & ドキュメント更新: 1 日

## 依存
- 評価軸生成サービス (`AxisGenerator`)
- シナリオ生成サービス (`SceneBuilder`)

## TODO
- GitHub Issue: API 実装 (#TBD)
- 設計共有: 次回定例でレビュー
